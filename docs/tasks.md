# Detaljerede Development Tasks

## üìã Oversigt
Denne fil indeholder detaljerede implementeringsopgaver baseret p√• `next-step.md` punkterne. Hver task er designet til at v√¶re konkret og actionable.

---

## 1. üéõÔ∏è Konfigurerbar V√¶gtning og Dynamisk Scoring

### 1.1 Refaktorer Transform Pipeline
**Beskrivelse**: Omstruktur√©r s√• individual score-komponenter beregnes i transform, men final v√¶gtning sker i front-end.

**Nuv√¶rende parametre (alle beregnes som 0-10 point)**:
- Energiklasse (global)
- Togstation afstand (global) 
- Grundst√∏rrelse (relativ per postnummer)
- Husst√∏rrelse (relativ per postnummer)
- Priseffektivitet (relativ per postnummer)
- Bygge√•r (relativ per postnummer)
- K√¶lderst√∏rrelse (relativ per postnummer)
- Dage p√• marked (relativ per postnummer)

**Tasks**:
- [x] Fjern `total_score` beregning fra `transform_listings_local.py`
- [x] Behold kun individuelle score komponenter (score_energy, score_train_distance, etc.)
- [x] Fjern `total_score` kolonne fra database schema
- [x] Test at alle individuelle scores stadig beregnes korrekt

### 1.2 Front-end V√¶gtnings System
**Beskrivelse**: Implementer dynamisk v√¶gtning og score beregning i Streamlit app.

**Tasks**:
- [x] Lav `DynamicScoringEngine` klasse i `src/dynamic_scoring.py`
- [x] Implementer real-time score beregning: `total_score = sum(individual_score * weight/100)`
- [x] Standard v√¶gtning: 12.5% per parameter (100% / 8 = 12.5%)
- [x] Implementer v√¶gtnings validering (sum skal v√¶re 100%)
- [x] Cache beregnede scores for performance n√•r weights ikke √¶ndres

### 1.3 V√¶gtnings UI i Streamlit
**Beskrivelse**: Lav brugervenlig interface til at justere v√¶gtninger med manual trigger.

**Tasks**:
- [x] Tilf√∏j v√¶gtnings sektion i sidebar OVER filtere
- [x] Implementer sliders for hver parameter (0-100%)
- [x] Real-time validering og normalisering af v√¶gte (kun UI feedback)
- [x] Vis total v√¶gtning (skal v√¶re 100%) med color coding
- [x] Auto-just√©r andre v√¶gte n√•r √©n √¶ndres (optional behavior)
- [x] Tilf√∏j "üîÑ Genberegn Scores" knap som trigger re-scoring
- [x] Disable/enable knap baseret p√• om v√¶gte har √¶ndret sig

### 1.4 Foruddefinerede Profiler
**Beskrivelse**: Lav foruddefinerede v√¶gtnings-profiler for forskellige brugertyper.

**Profiler**:
- **"Standard (lige v√¶gt)"**: Alle 12.5%
- **"Familievenlig"**: Husst√∏rrelse 20%, Grundst√∏rrelse 20%, Bygge√•r 15%, Energi 15%, K√¶lder 10%, Transport 10%, Pris 5%, Marked 5%
- **"Investering"**: Priseffektivitet 25%, Dage p√• marked 20%, Transport 15%, Energi 15%, Husst√∏rrelse 10%, Bygge√•r 10%, Grundst√∏rrelse 3%, K√¶lder 2%
- **"F√∏rstegangsk√∏ber"**: Priseffektivitet 30%, Energi 20%, Transport 15%, Husst√∏rrelse 15%, Bygge√•r 10%, Marked 5%, Grundst√∏rrelse 3%, K√¶lder 2%
- **"Pensionist"**: Energi 25%, Transport 20%, Bygge√•r 15%, Husst√∏rrelse 15%, Priseffektivitet 10%, Marked 10%, Grundst√∏rrelse 3%, K√¶lder 2%
- **"Milj√∏bevidst"**: Energi 35%, Transport 25%, Bygge√•r 15%, Priseffektivitet 10%, Husst√∏rrelse 8%, Marked 4%, Grundst√∏rrelse 2%, K√¶lder 1%

**Tasks**:
- [x] Definer profiler som dict i `DynamicScoringEngine`
- [x] Lav profil dropdown OVER v√¶gtnings sliders
- [x] Auto-opdater sliders n√•r profil v√¶lges
- [x] Tilf√∏j "Custom" profil n√•r user √¶ndrer v√¶gte manuelt
- [x] Vis aktiv profil navn

### 1.5 Performance Optimering
**Beskrivelse**: S√∏rg for at score beregning er effektiv n√•r triggered manuelt.

**Tasks**:
- [x] Cache score beregninger baseret p√• weight signature
- [x] Vis loading spinner under score genberegning
- [x] Vis progress bar ved store datasets
- [x] Optimer pandas operations for score calculation
- [x] Implementer state management s√• kun √¶ndrede v√¶gte trigger genberegning

---

## 2. üí∞ M√•nedlige Ejerudgifter Integration

### 2.1 Research og Data Vurdering
**Beskrivelse**: Unders√∏g om m√•nedlige ejerudgifter data er tilg√¶ngelig fra boliga.dk eller andre kilder.

**Tasks**:
- [ ] Analys√©r boliga.dk JSON response for ejerudgifts-felter
- [ ] Research alternative datakilder (ejendomsdata.dk, tinglysning.dk)
- [ ] Test scraping af ekstra data hvis n√∏dvendigt
- [ ] Dokumenter findings i `docs/ejerudgifter-research.md`

### 2.2 Ejerudgifts Estimering (hvis data ikke tilg√¶ngelig)
**Beskrivelse**: Implementer estimering baseret p√• hustype, st√∏rrelse og postnummer.

**Estimering komponenter**:
- Ejendomsv√¶rdiskat (ca. 1% af ejendomsv√¶rdi)
- Grundskyld (varierer per kommune)
- Forsikring (estimat baseret p√• husv√¶rdi)
- Vedligeholdelse (estimat baseret p√• alder og st√∏rrelse)

**Tasks**:
- [ ] Lav `MonthlyExpenseCalculator` klasse
- [ ] Implementer estimering algoritmer
- [ ] Integr√©r i transform pipeline
- [ ] Tilf√∏j m√•nedlige udgifter som ny scoring parameter (0-10 point)

---

## 3. üó∫Ô∏è Interaktivt Kort Funktionalitet

### 3.1 Kort Implementation
**Beskrivelse**: Tilf√∏j interaktivt kort med housing data visualization.

**Tasks**:
- [ ] Install√©r Folium eller Plotly mapping library
- [ ] Lav `MapVisualization` klasse i `src/map_utils.py`
- [ ] Implementer basis kort med zoom og pan
- [ ] Plot huse som mark√∏rer med color-coding efter score
- [ ] Implementer clustering for bedre performance ved mange huse

### 3.2 Hover Popup Data
**Beskrivelse**: Vis bolig information n√•r man hover over kort mark√∏rer.

**Popup indhold**:
- Adresse
- Samlet pris (formateret)
- m¬≤ st√∏rrelse
- Total score
- Top 3 score faktorer

**Tasks**:
- [ ] Design popup HTML template
- [ ] Implementer hover event handling
- [ ] Format√©r tal og tekst brugervenligt
- [ ] Test p√• forskellige sk√¶rm st√∏rrelser

### 3.3 Kort Integration i App
**Beskrivelse**: Tilf√∏j kort som ny tab i Streamlit app.

**Tasks**:
- [ ] Lav ny "üó∫Ô∏è Kort" tab i `app_local.py`
- [ ] Syncronis√©r kort filtre med main app filtre
- [ ] Implementer bidirektional opdatering (kort ‚Üî tabel)
- [ ] Optim√©r performance for store datas√¶t

---

## 4. üì° Ekstern Data Integration

### 4.1 Rejseplanen API Integration (Prim√¶r transport data)
**Beskrivelse**: Implementer integration med Rejseplanen API for komplet offentlig transport data.

**Tasks**:
- [ ] Ops√¶t Rejseplanen API adgang (https://help.rejseplanen.dk/hc/da/articles/214174465-Rejseplanens-API)
- [ ] Lav `RejseplanenEnricher` klasse i `src/external_data.py`
- [ ] Implementer s√∏gning efter stationer/stoppesteder inden for radius
- [ ] Beregn transport score baseret p√•: antal stoppesteder, transport typer (S-tog vs bus), frekvens
- [ ] Tilf√∏j data caching i DuckDB for at respektere rate limits
- [ ] H√•ndter forskellige transport typer: S-tog (h√∏j score), Metro (h√∏j score), Bus (medium score)

### 4.2 OpenStreetMap Integration (Supplerende POI data)
**Beskrivelse**: Brug OSM for POI data hvor Rejseplanen ikke d√¶kker.

**Tasks**:
- [ ] Install√©r `overpy` library for OSM Overpass API  
- [ ] Implementer `OSMEnricher` klasse i `src/external_data.py`
- [ ] Fokus√©r p√• non-transport POI: supermarkeder, apotek, skoler, banker
- [ ] Implementer service score (facility density inden for 2km radius)
- [ ] Kategoris√©r POI typer og v√¶gt dem forskelligt
- [ ] Cache OSM data lokalt med intelligent refresh strategi

### 4.3 Danmarks Statistik Integration (Fase 2)
**Beskrivelse**: Tilf√∏j demografisk scoring baseret p√• postnummer data.

**Tasks**:
- [ ] Research DST API endpoints for relevante data
- [ ] Implementer `DemographicsEnricher` klasse i `src/external_data.py`
- [ ] Hent indkomst, uddannelsesniveau, aldersfordeling per postnummer
- [ ] Design demografisk score algoritme
- [ ] Cache demografisk data lokalt (opdateres sj√¶ldent)

### 4.4 Ny Scoring Parametre
**Beskrivelse**: Integr√©r eksterne data som nye scoring faktorer.

**Nye parametre (0-10 point hver)**:
- Rejseplanen transport score (erstatter nuv√¶rende tog-distance score)
- Service/indk√∏b density score (OSM data)
- Demografisk match score (DST data)
- Milj√∏kvalitet score (hvis tilg√¶ngelig)

**Tasks**:
- [ ] Udvid `transform_listings_local.py` med nye scores
- [ ] Opdater v√¶gtnings system til at h√•ndtere 10+ parametre  
- [ ] Erstat nuv√¶rende `score_train_distance` med `score_transport_access`
- [ ] Opdater app visning med nye score kolonner
- [ ] Tilf√∏j nye filer til `start.py` script dependency check

---

## 5. üîÆ What-if Scenarier

### 5.1 Scenarie Engine
**Beskrivelse**: Implementer system til at lave "hvad hvis" analyser p√• bolig data.

**Tasks**:
- [ ] Lav `ScenarioEngine` klasse i `src/scenario_analysis.py`
- [ ] Implementer parameter modification (pris, st√∏rrelse, bygge√•r, etc.)
- [ ] Berregn √¶ndret score baseret p√• modifications
- [ ] Support for b√•de absolutte √¶ndringer og procentvise √¶ndringer

### 5.2 Foruddefinerede Scenarier
**Beskrivelse**: Lav common scenarier som brugere kan v√¶lge imellem.

**Scenarier**:
- "Prisfald 10%" - reduc√©r pris med 10%
- "Energirenovering" - opgrader energiklasse med 1 niveau
- "K√¶lder tilbygning" - tilf√∏j 50m¬≤ k√¶lder
- "Markedstid 50% mindre" - halv√©r dage p√• marked
- "Transport forbedring" - simuler ny letbane station 2km v√¶k

**Tasks**:
- [ ] Definer scenarier som konfiguration
- [ ] Implementer scenarie selector i Streamlit
- [ ] Vis original vs modificeret score side om side
- [ ] Highlight hvilke factors der √¶ndres mest

### 5.3 Custom Scenarie Builder
**Beskrivelse**: Lad brugere lave deres egne what-if scenarier.

**Tasks**:
- [ ] Lav interaktiv scenarie builder i Streamlit
- [ ] Support for multi-parameter √¶ndringer
- [ ] Tilf√∏j "üîÑ Beregn Scenarie" knap til at trigger beregning
- [ ] Gem og del scenarier mellem sessioner

---

## 6. ‚≠ê Favoritter System

### 6.1 Database Schema Udvidelse
**Beskrivelse**: Udvid database til at st√∏tte favoritter med noter.

**Tasks**:
- [ ] Lav `favorites` tabel i `database_local.py`:
  ```sql
  CREATE TABLE favorites (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      ouId INTEGER REFERENCES listings_scored(ouId),
      added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      notes TEXT,
      user_rating INTEGER CHECK (user_rating >= 1 AND user_rating <= 5),
      tags VARCHAR  -- komma-separeret liste
  );
  ```
- [ ] Implementer CRUD operations for favoritter
- [ ] H√•ndter data persistence ved pipeline re-runs

### 6.2 Favorit Management UI
**Beskrivelse**: Tilf√∏j favorit funktionalitet til Streamlit app.

**Tasks**:
- [ ] Tilf√∏j "Tilf√∏j til favoritter" knap i bolig listings
- [ ] Lav ny "‚≠ê Favoritter" tab
- [ ] Implementer notes editor og rating system
- [ ] Tilf√∏j tag system til kategorisering
- [ ] Vis favoritter uagtet af aktive filtre

### 6.3 PDF Export
**Beskrivelse**: Lav PDF rapport af favoritter.

**Tasks**:
- [ ] Install√©r `reportlab` eller `weasyprint` for PDF generation
- [ ] Design PDF template med bolig data og billeder
- [ ] Implementer export funktionalitet
- [ ] Inkluder notes, ratings og personlige kommentarer
- [ ] Tilf√∏j "Eksport√©r til PDF" knap i favoritter tab

---

## 7. üìä Postnummer Statistikker

### 7.1 Statistik Beregning
**Beskrivelse**: Berregn omfattende statistikker per postnummer.

**Statistikker**:
- Gennemsnitspris og median pris
- Gennemsnit m¬≤ pris
- Antal aktive listings
- Gennemsnit tid p√• marked
- Score distribution (min, max, average per parameter)
- Grundst√∏rrelse statistics
- Bygge√•r distribution

**Tasks**:
- [ ] Lav `PostcodeStatistics` klasse i `src/stats_calculator.py`
- [ ] Implementer alle statistik beregninger
- [ ] Cache statistikker for bedre performance
- [ ] H√•ndter postnumre med f√• listings

### 7.2 Sammenligning P√• Tv√¶rs
**Beskrivelse**: Lav v√¶rkt√∏j til at sammenligne postnumre direkte.

**Tasks**:
- [ ] Lav ny "üìä Postnummer Stats" tab i app
- [ ] Implementer multi-select for postnummer sammenligning
- [ ] Vis side-om-side comparison tabel
- [ ] Tilf√∏j visualiseringer (bar charts, radar charts)
- [ ] Highlight st√∏rste forskelle mellem omr√•der

### 7.3 Trend Visualisering
**Beskrivelse**: Vis udvikling og trends i postnummer data.

**Tasks**:
- [ ] Implementer time-series data collection
- [ ] Lav trend charts for pris udvikling
- [ ] Vis market activity trends (antal nye listings per uge)
- [ ] Sammenlign score trends mellem postnumre

---

## 8. üèÜ Topscorer Funktionalitet

### 8.1 Kategori Topscorer
**Beskrivelse**: Vis top 1 hus per scoring kategori som HTML cards p√• forsiden.

**Kategorier**:
- Bedste samlet score
- Billigste per m¬≤
- St√∏rste hus
- Nyeste bygge√•r
- Bedste energiklasse
- St√∏rst grund
- T√¶ttest p√• transport
- Hurtigst salg (f√¶rrest dage p√• marked)

**Tasks**:
- [ ] Lav `TopScorerCalculator` klasse i `src/top_scorers.py`
- [ ] Implementer kategori-baseret ranking
- [ ] H√•ndter ties og edge cases
- [ ] Integr√©r som HTML cards p√• main page (ikke separat tab)

### 8.2 Topscorer Visning p√• Forsiden
**Beskrivelse**: Elegant pr√¶sentation af topscorer data som cards p√• main page.

**Tasks**:
- [ ] Design compact HTML cards layout (4 cards per r√¶kke)
- [ ] Vis thumbnail billede (f√∏rste image fra image_urls)
- [ ] Highlight den vindende metric med farve/ikon
- [ ] Tilf√∏j click-to-expand funktionalitet
- [ ] Plac√©r cards OVER filter sektion p√• main page
- [ ] Tilf√∏j "Tilf√∏j til favoritter" knap direkte p√• card

### 8.3 Dynamisk Filtering
**Beskrivelse**: Topscorere opdateres baseret p√• aktuelle filtre.

**Tasks**:
- [ ] Integr√©r topscorer med filter system
- [ ] Opdatering n√•r filtre √¶ndres eller "Genberegn" klikkes
- [ ] Vis "Ingen data" meddelelse hvis ingen matches i kategori
- [ ] Optim√©r performance ved store datasets
- [ ] Tilf√∏j expand/collapse funktionalitet for topscorer sektion

---

## üóíÔ∏è UI √Ündringer (Implementeret)

### √Ündringer 28/7/2025:
- [x] Flyttet checkbox filtre (postnummer match og sete huse) til bunden af sidebar
- [x] √Ündret "Scoring V√¶gtning" til "V√¶gtning af parametre"
- [x] Fjernet "Aktuelle v√¶gte" sektion fra v√¶gtnings UI
- [x] Fjernet "Lokal Version" fra hovedtitel
- [x] Fjernet "Allerede sete huse" tab (tilf√∏jes igen senere)
- [x] Fjernet "Mark√©r huse som sete" sektion fra hovedside
- [x] Tilf√∏jet titel "üè† Alle Boliger" til hovedtabel

**Note**: "Allerede sete huse" tab skal genimplementeres senere som del af opgave 12.

---

## 12. üëÅÔ∏è Forbedret "Set" Huse System

### 12.1 Database Schema Forbedring
**Beskrivelse**: Forbedre seen_houses tabel struktur og funktionalitet.

**Nuv√¶rende problemer med seen_houses**:
- Mangler timestamps og metadata
- Ingen batch operations
- Ikke optimeret til frequent queries

**Tasks**:
- [ ] Redesign `seen_houses` tabel i `database_local.py`:
  ```sql
  CREATE TABLE seen_listings (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      ouId INTEGER NOT NULL,
      marked_seen_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      notes TEXT,
      user_rating INTEGER CHECK (user_rating >= 1 AND user_rating <= 5),
      is_hidden BOOLEAN DEFAULT FALSE,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
  CREATE INDEX idx_seen_listings_ouid ON seen_listings(ouId);
  CREATE INDEX idx_seen_listings_hidden ON seen_listings(is_hidden);
  ```
- [ ] Implementer migration fra old seen_houses tabel
- [ ] Tilf√∏j CRUD operations med batch support

### 12.2 Forbedret UI Integration  
**Beskrivelse**: Forbedre hvordan "set" huse h√•ndteres i app interface.

**Tasks**:
- [ ] Tilf√∏j "Marker som set" checkbox ved hver bolig i listen
- [ ] Implementer batch "Marker valgte som set" funktionalitet
- [ ] Forbedre filter checkbox: "Skjul sete huse" (standard: checked)
- [ ] Tilf√∏j hurtig "Marker alle som set" knap ved bund af listen
- [ ] Vis "Set" status visuelt i bolig listings (fx gr√• baggrund)

### 12.3 Set Huse Management
**Beskrivelse**: Lav administration af sete huse.

**Tasks**:
- [ ] Forbedre "üîç Sete huse" tab med bedre functionality
- [ ] Tilf√∏j batch "Fjern fra sete" operation  
- [ ] Implementer search/filter i sete huse
- [ ] Tilf√∏j notes og rating til sete huse
- [ ] Export sete huse til CSV/PDF
- [ ] Vis statistikker: "Du har set X huse de sidste Y dage"

---

## 9. üîç Lignende Huse Funktionalitet

### 9.1 Similarity Algorithm
**Beskrivelse**: Definer og implement√©r algoritme til at finde lignende huse.

**Similarity faktorer (lige v√¶gt)**:
- Pris per m¬≤ afvigelse (¬±20% = h√∏j similarity)
- Bygge√•r afvigelse (¬±10 √•r = h√∏j similarity)  
- Grundst√∏rrelse afvigelse (¬±30% = h√∏j similarity)

**Similarity beregning**:
```
similarity_score = (
    (1 - abs(house1_m2_price - house2_m2_price) / max(house1_m2_price, house2_m2_price)) * 33.33 +
    (1 - abs(house1_build_year - house2_build_year) / 50) * 33.33 +
    (1 - abs(house1_lot_size - house2_lot_size) / max(house1_lot_size, house2_lot_size)) * 33.33
)
```

**Tasks**:
- [ ] Lav `SimilarityCalculator` klasse i `src/similarity_finder.py`
- [ ] Implementer similarity scoring algoritme
- [ ] Set minimum similarity threshold (fx 70%)
- [ ] Optim√©r for performance med store datasets

### 9.2 Cross-Postcode Search
**Beskrivelse**: Find lignende huse p√• tv√¶rs af postnumre.

**Tasks**:
- [ ] Implementer cross-postcode similarity search
- [ ] Vis similarity score som procentuel match
- [ ] Sort√©r efter similarity score (h√∏jeste f√∏rst)
- [ ] Tilf√∏j "Lignende huse" sektion til bolig detail view
- [ ] Limit til top 5-10 mest lignende huse

### 9.3 Similarity Insights
**Beskrivelse**: Giv indsigt i hvorfor huse er lignende.

**Tasks**:
- [ ] Vis breakdown af similarity faktorer
- [ ] Highlight hvilke metrics der matcher bedst
- [ ] Sammenlign side-om-side med original hus
- [ ] Tilf√∏j "Hvorfor er dette lignende?" explanation

---

## 10. üìà Indbyggede Benchmarks

### 10.1 Postnummer Benchmarks
**Beskrivelse**: Sammenlign hver bolig med gennemsnittet i postnummeret.

**Sammenligninger**:
- "Dette hus er 12% billigere end gennemsnittet i omr√•det"
- "Prisen per m¬≤ er 8% h√∏jere end lokalomr√•det"
- "Grundst√∏rrelsen er 45% st√∏rre end normalt for postnummeret"
- "Bygge√•ret er 15 √•r nyere end gennemsnittet"

**Tasks**:
- [ ] Lav `BenchmarkCalculator` klasse i `src/benchmarks.py`
- [ ] Berregn postnummer gennemsnit for alle metrics
- [ ] Implementer procentuelle afvigelser
- [ ] H√•ndter edge cases (fx kun √©t hus i postnummer)

### 10.2 Benchmark Visning
**Beskrivelse**: Elegant visning af benchmark data i app.

**Tasks**:
- [ ] Tilf√∏j benchmark kolonne til bolig listings
- [ ] Implementer hover tooltips med detaljerede benchmarks
- [ ] Farv-kod positive/negative afvigelser (gr√∏n/r√∏d)
- [ ] Lav expandable benchmark sektion per bolig

### 10.3 Benchmark Insights
**Beskrivelse**: Giv dybere indsigt i benchmark data.

**Tasks**:
- [ ] Lav "üìà Benchmark Analyse" tab
- [ ] Vis distribution af v√¶rdier i postnummer
- [ ] Highlight outliers og exceptionally good deals
- [ ] Tilf√∏j "Deal Score" baseret p√• hvor mange benchmarks der er positive

---

## 11. üîß Address Display Refactor ‚úÖ

### 11.1 Fjern Full Address Creation ‚úÖ
**Beskrivelse**: Opdater transform script til at ikke lave full address string.

**Tasks**:
- [x] Fjern `# Create full address` sektion fra `transform_listings_local.py` linje 134
- [x] Remove `full_address` fra column selection
- [x] Update database schema til at fjerne `full_address` felt hvis n√∏dvendigt
- [x] Ensure `address_text`, `house_number`, og `city` er individuelle kolonner

### 11.2 App Display Update ‚úÖ
**Beskrivelse**: Vis adresse og by som separate kolonner i Streamlit app.

**Tasks**:
- [x] Opdater `app_local.py` til at bruge separate adresse kolonner
- [x] Lav address display som: `{address_text} {house_number}`
- [x] Vis by som separat kolonne
- [x] Update alle steder hvor `full_address` bruges

### 11.3 Clickable Address Implementation ‚úÖ
**Beskrivelse**: G√∏r adresser clickable og √•bner Google s√∏gning.

**Funktionalitet**:
- Click p√• adresse ‚Üí √•bner ny browser tab
- Google s√∏gning: `"[address] [city] boliga site:boliga.dk"`
- Dette finder typisk m√¶gler opslag p√• boliga.dk

**Tasks**:
- [x] Implementer clickable address links i Streamlit
- [x] Format Google s√∏ge URL korrekt
- [x] Test at s√∏gningen finder relevante sider
- [x] Overvej alternative s√∏ge strategier (direct boliga.dk link via ouId)

**Alternative implementation**:
- Direct link til boliga.dk via ouId: `https://www.boliga.dk/bolig/[ouId]`
- Kan v√¶re mere direkte end Google s√∏gning

**Tasks for alternative**:
- [x] Test direct boliga.dk URL pattern
- [x] Implementer hvis URL pattern er stabil
- [x] Fallback til Google s√∏gning hvis direct link fejler

---

## üìÖ Implementation Timeline

### Sprint 1 (2 uger)
- Task 11: Address refactor ‚úÖ
- Task 1.1-1.3: V√¶gtnings system (nye filer: `src/dynamic_scoring.py`) ‚úÖ
- Task 12.1-12.2: Forbedret seen houses system
- Task 8.1-8.2: Topscorer cards p√• forside (ny fil: `src/top_scorers.py`) ‚úÖ

### Sprint 2 (2 uger)  
- Task 3: Kort funktionalitet (ny fil: `src/map_utils.py`)
- Task 10: Benchmark system (ny fil: `src/benchmarks.py`) 
- Task 6.1-6.2: Favoritter basic functionality

### Sprint 3 (3 uger)
- Task 4.1-4.2: Rejseplanen + OSM integration (filer: `src/external_data.py`)
- Task 7: Postnummer statistikker (ny fil: `src/stats_calculator.py`)
- Task 9: Lignende huse (ny fil: `src/similarity_finder.py`)

### Sprint 4 (2 uger)
- Task 5: What-if scenarier (ny fil: `src/scenario_analysis.py`)
- Task 2: M√•nedlige ejerudgifter
- Task 6.3: PDF export
- Task 12.3: Advanced seen houses management

### Sprint 5 (1 uge)
- Task 4.3-4.4: Danmarks Statistik integration
- Testing og optimering
- start.py script updates for nye filer
- Dokumentation

### üìÅ Nye Filer der skal tilf√∏jes til start.py dependency check:
```python
REQUIRED_SRC_FILES = [
    'src/extract_listings_local.py',
    'src/transform_listings_local.py', 
    'src/database_local.py',
    'src/dynamic_scoring.py',        # Task 1
    'src/external_data.py',          # Task 4
    'src/map_utils.py',              # Task 3
    'src/top_scorers.py',            # Task 8
    'src/stats_calculator.py',       # Task 7
    'src/similarity_finder.py',      # Task 9
    'src/scenario_analysis.py',      # Task 5
    'src/benchmarks.py'              # Task 10
]
```

---

## üß™ Testing Strategy

### Unit Tests
- [ ] Test scoring algorithms med mock data
- [ ] Test external API integration med stub responses
- [ ] Test database operations
- [ ] Test v√¶gtnings calculations

### Integration Tests
- [ ] End-to-end pipeline test
- [ ] Streamlit app functionality test
- [ ] Database persistence test
- [ ] External API rate limiting test

### Performance Tests
- [ ] Large dataset handling (1000+ listings)
- [ ] External API response times
- [ ] Map rendering performance
- [ ] Database query optimization

---

## üìã Definition of Done

For hver task g√¶lder:
- [ ] Feature er implementeret og testet
- [ ] Code er dokumenteret med docstrings
- [ ] Unit tests skrevet og passerer
- [ ] Integration med eksisterende system verificeret
- [ ] Performance er acceptable (< 5 sek response time)
- [ ] Error handling implementeret
- [ ] User interface er intuitivt og brugervenligt
- [ ] Feature er dokumenteret i README eller relevante docs

---

## üîÑ Maintenance og Overvejelser

### Kontinuerlig forbedring
- Monitor external API stability og data quality
- User feedback integration
- Performance optimization baseret p√• usage patterns
- Ny externe datakilder n√•r de bliver tilg√¶ngelige

### Teknisk g√¶ld h√•ndtering
- Regular code reviews
- Refactoring af komplekse komponenter
- Database optimization ved √∏get data volume
- Error monitoring og logging forbedringer
